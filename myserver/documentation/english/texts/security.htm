<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
<head>
	<title>Documentation MyServer - Contrôle des accès - www.myserverproject.net</title>
	<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<link rel="stylesheet" type="text/css" href="../style/myserver.css" />
</head>
<body>
				<h1 class="title">CONTROLE DES ACCES</h1>
				<br />
				Afin de pouvoir contrôler l'accès à un fichier, vous devez ajouter un fichier
				s&eacute;curit&eacute; au r&eacute;pertoire que vous voulez prot&eacute;ger.
				Le fichier de s&eacute;curit&eacute; est un fichier XML, mais afin de pouvoir
				&ecirc;tre utilis&eacute; par MyServer, il ne faut pas lui mettre d'extension
				(le nom du fichier doit simplement &ecirc;tre &quot;security&quot;).
				<br />
				<br />La syntaxe de ce fichier est:
				<br />
				<br /><span class="code"> &lt;?xml version="1.0"?&gt;
				<br />&lt;SECURITY&gt;
				<br />&lt;HTTP TRACE="ON" /&gt;
				<br />&lt;AUTH TYPE="Basic" /&gt;</span>
				<span class="code">
				<br />&lt;ACTION name=&quot;Host&quot; value=&quot;localhost&quot;&gt;ALLOW&lt;/ACTION&gt;
				<br />&lt;USER NAME="God" PASS="godpassword" READ="TRUE" WRITE="TRUE" BROWSE="TRUE" EXECUTE="TRUE" /&gt;
				<br />&lt;!--Voici les r&eacute;glages pour les utilisateurs--&gt;
				<br />&lt;USER NAME="Guest" PASS="" READ="TRUE" BROWSE="TRUE"/&gt;
				<br />&lt;!--l'utilisateur invit&eacute; (guest en anglais)--&gt;
				<br />&lt;USER NAME="Tim" PASS="Tom" READ="TRUE" EXECUTE="TRUE" BROWSE="TRUE"/&gt;
				<br />&lt;!--Another user--&gt;
				<br />&lt;ITEM FILE="file1" READ="TRUE" WRITE="FALSE" EXECUTE="FALSE"&gt;
				<br />&lt;ACTION name=&quot;Host&quot; value=&quot;remote&quot;&gt;DENY&lt;/ACTION&gt;
				<br />&lt;!--D&eacute;fini un fichier et ses permissions--&gt;
				<br />&lt;USER NAME="Jim" PASS="Morrison" READ="TRUE" WRITE="FALSE" EXECUTE="FALSE" /&gt;
				<br />&lt;!--D&eacute;fini un fichier et ses permissions--&gt;
				<br />&lt;USER NAME="Bob" PASS="Marley" READ="TRUE" WRITE="FALSE" EXECUTE="TRUE" /&gt;
				<br />&lt;ACTION name=&quot;Host&quot; value=&quot;localhost&quot;&gt;DENY&lt;/ACTION&gt; 
				<br />&lt;!--d'autres permissions pour le fichier--&gt;
				<br />&lt;/ITEM&gt;
				<br />&lt;--End of the file block--&gt;
				<br />&lt;/SECURITY&gt;
				<br /></span>
				<br />
				<br />La ligne <span class="code">&lt;HTTP TRACE="ON" /&gt;</span> est optionnelle, et est
				d&eacute;crite dans la section <a href="virtualhosts.htm">H&ocirc;tes virtuels</a> de ce manuel.
				Rendez vous sur cette page pour comprendre cette ligne.
				<br />
				<br />La ligne <span class="code">&lt;AUTH TYPE="Basic" /&gt;</span> est optionnelle. Elle
				permet de choisir la m&eacute;thode d'authentification à utiliser sur votre site. Par d&eacute;faut elle
				vaut "Basic", mais vous pouvez la mettre à "Digest" comme ci dessous:
				<br />
				<br /><span class="code">&lt;AUTH TYPE="Digest" /&gt;</span>
				<br />Si la ligne n'est pas indiqu&eacute;e, la valeur "Basic" sera utilis&eacute;e.
				<br />La m&eacute;thode "Digest" est plus s&eacute;curis&eacute;e, puisque les mots de passes ne sont pas
				envoy&eacute;s en clair sur le r&eacute;seau.
				<br />
				<br />
				Le programme v&eacute;rifie tout d'abord si l'utilisateur possède les permissions n&eacute;cessaires
				dans le bloc du fichier:
				<br />
				<span class="code">&lt;USER NAME="Bob" PASS="Marley" READ="TRUE" WRITE="FALSE" 
				EXECUTE="TRUE" /&gt;</span>
				<br />
				<br />Si aucune permission n'est d&eacute;finie, le programme essaie d'utiliser les permissions d&eacute;finies
				dans le fichier:
				<br /><span class="code">&lt;ITEM FILE="file1" READ="TRUE" WRITE="FALSE" EXECUTE="FALSE"&gt;</span>
				<br />
				<br />Si le programme ne trouve aucun fichier de permissions, il utilise alors les
				valeurs g&eacute;n&eacute;rales de l'utilisateur:
				<br />
				<span class="code">&lt;USER NAME="Guest" PASS="" READ="TRUE" BROWSE="TRUE"/&gt;</span>
				<br />
				<br />Si l'utilisateur n'existe pas, le programme lui renverra une erreur.
				<br />
				<br />
				<br />
				<br />
				<br />
				Les lignes <span class="code">&lt;ACTION&gt;</span> ci dessus d&eacute;finissent si on peut ou non accéder à une ressource, en fonctions des conditions. Par exemple, la ligne :<br />
				<br />
				<br /><span class="code">&lt;ACTION name=&quot;Host&quot; value=&quot;remote&quot;&gt;DENY&lt;/ACTION&gt;</span>
				<br />
				<br />
				indique que l'accès au fichier &quot;file1&quot; sera refus&eacute; si l'hôte utilis&eacute; a pour nom
				&quot;remote&quot;. Mais s'il y avait d'autres lignes pour ce fichier, par exemple &quot;localhost&quot;,
				il serait accessible, sauf pour l'utilisateur Bob.
				<br />
				<br /><span class="code">&lt;ACTION name=&quot;Host&quot; value=&quot;localhost&quot;&gt;DENY&lt;/ACTION&gt;</span>
				<br />
				<br />
				<br />Si le fichier de s&eacute;curit&eacute; est absent, un fichier de s&eacute;curit&eacute; par d&eacute;faut est utilis&eacute;
				par le programme. Ce fichier peut être trouv&eacute; dans le r&eacute;pertoire system.
				<br />
</body>
</html>
